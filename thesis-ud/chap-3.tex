\chapter{Implementation and Evaluation}

Our system Cowpie \footnote{demo page: \url{infolab.ece.udel.edu:8912/cowpie/}}

Because we are parsing \LaTeX\ directly, while most researches evaluate using MathML/XML format collection. We have tried to convert MathML/XML dataset back to \LaTeX\ using \textit{pandoc}, but fail to convert all formula correctly. 
Nevertheless, we have crawled the entire Math Stack Exchange website posts before March 2015 (61M raw data in text files with one \LaTeX\ formula per line) and choose to use our own dataset to evaluate the data.
Our test query set consists queries mostly from NTCIR-10 Math Formula Search~\cite{ntcirtopic} and \cite{symbolpairs15}, some of them we are not able to find similar formula in our own dataset, are excluded from our test query set.
Table~\ref{TestQ} shows our complete test queries used in our evaluation. 

\begin{table}
\begin{center}
\renewcommand{\arraystretch}{2}
\begin{tabular}{|c|c||c|c|}\hline
ID & formula & ID & formula \\\hline
1 & 
$\int_0^\infty dx \int_{x}^\infty F(x,y)dy  =\int_0^\infty dy \int_{0}^y F(x,y)dx$ &
2 & 
$X(i\omega)$ \\\hline

3 & 
$x^n + y^n=z^n$ &
4 & 
$\int^{\infty}_{-\infty} e^{-x^2} dx$ \\\hline

5 & 
$\frac{f(x+h)-f(x)}{h}$ &
6 & 
$\frac {\sin x} x$ \\\hline

7 & 
$ax^2 + bx +c$ &
8 & 
$\frac {e^x + y}{z}$ \\\hline

7 & 
$O(n \log n)$ &
8 & 
$H^n(X) = Z^n (X) / B^n(X)$ \\\hline

9 & 
$A_n = \frac 1 \pi \int_{-\pi}^\pi F(x) \cos(nx) dx$ &
10 & 
$\lim_{x \to \infty} (1 + \dfrac 1x)^x$ \\\hline

11 & 
$f(x) = f(0) + f'(0)x + \frac{f''(0)}{2!} x^2 + \ldots$ &
12 & 
$f(a) = \frac 1 {2 \pi i} \oint_r \frac{f(z)}{z-a} \;\mathrm{d}z$ \\\hline

13 & 
$x^2 + 2xy + y^2 = |x|^2 + 2|x||y| + |y| ^2$ &
14 & 
$\int_a^b f(x) \;\mathrm{d}x = F(b) - F(a)$ \\\hline

15 & 
$\frac {n!}{r_1! \cdot r_2! \cdots r_k!}$ &
16 & 
$-b \pm \sqrt{b^2 - 4ac}$ \\\hline

17 & 
$1+\tan^2 \theta = \sec^2 \theta$ &
18 & 
$\bar{u} = (x,y,z)$ \\\hline

\end{tabular}
\renewcommand{\arraystretch}{1}
\end{center}
\caption{Test query set}\label{TestQ}
\end{table}
